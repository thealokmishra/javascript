<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body style="background-color: #212121">
    0 UNSENT Client has been created. open() not called yet. 1 OPENED open() has
    been called. 2 HEADERS_RECEIVED send() has been called, and headers and
    status are available. 3 LOADING Downloading; responseText holds partial
    data. 4 DONE The operation is complete.
  </body>
  <script>
    // legacy way of making API requests
    const requestUrl = "https://api.github.com/users/thealokmishra"; //github api endpoint
    const xhr = new XMLHttpRequest(); //XMLHttpRequest is a built-in JavaScript object that allows us to make HTTP requests to a server and receive responses. It provides methods and properties to configure and send requests, as well as handle the responses from the server.
    xhr.open("GET", requestUrl); //open method initializes a new request. It takes two arguments: the HTTP method (in this case, 'GET') and the URL of the API endpoint (requestUrl). This sets up the request but does not send it yet.
    xhr.onreadystatechange = function () {
      //onreadystatechange is an event handler that is called whenever the readyState property of the XMLHttpRequest object changes. This allows us to track the progress of the request and handle the response when it is complete.
      console.log(xhr.readyState);
      if (xhr.readyState === 4) {
        //readyState 4 means that the request is complete and the response is ready to be processed. When this condition is met, we can access the response data and perform any necessary actions with it.
        const data = JSON.parse(this.responseText); //the api response is normally in string format, so we need to parse it into a JavaScript object using JSON.parse() method. This allows us to access the properties of the response data as JavaScript objects and use them in our code.
        console.log(typeof data);
        console.log(data.followers);
      }
    };
    xhr.send(); //send method is used to send the request to the server. Once this method is called, the request is sent and the onreadystatechange event handler will be triggered as the request progresses through its different readyState values.
  </script>
</html>
